(function(e){function g(l,m){var n="<"+l;if(m==undefined){return n+">"}jQuery.each(m,function(o,p){if(p!=undefined){n+=" "+o+'="'+String(p).replace(/"/g,"&quot;")+'" '}});return n+">"}function h(l){return"</"+l+">"}function i(l,m){if(m[l]!=""&&m[l]!={}&&m[l]!=undefined){return true}return false}function d(m,o){var m=m.replace("node:","");var n=m.split("/");var l;l=o[n[0]];n.splice(0,1);jQuery.each(n,function(q,p){l=l[p]});return l}function f(m,n){var l=m;if(l.indexOf("node:")!==-1){return d(l,n)}return l}function k(m,n){var l;if(!i("value",n)){l=m}else{l=f(n.value,m)}if(i("wrappedIn",n)){l=j(n.wrappedIn,l,m)}if(i("before",n)){l=a(n.before,m)+l}if(i("after",n)){l=l+a(n.after,m)}return l}function b(m,n){var l;console.log(m);console.log(n);jQuery.each(n.value,function(o,p){l+=g("td")+k(p.value,p.params)+h("td")});return l}function j(m,l,o){if(jQuery.type(m)=="string"){return g(m)+l+h(m)}else{var n={};if(i("attributes",m)){jQuery.each(m.attributes,function(p,q){n[p]=f(q,o)})}return g(m.tag_name,n)+l+h(m.tag_name)}}function a(l,n){if(i("value",l)){return j(l,l.value,n)}else{if(i("attributes",l)){var m={};jQuery.each(l.attributes,function(p,o){m[p]=f(o,n)});return g(l.tag_name,m)}else{return l}}}function c(r,l,o,p){var q=r;var o=o;var t=q.prop("tagName").toLowerCase();var m={};var n=["ul","ol","dl","div"];var s={ul:"li",ol:"li",dl:"dt",div:"div"};if(q.length>1){jQuery.error("smartAppend can't be used on array of elements")}if(jQuery.inArray(t,n)==-1){jQuery.error("Unsupported element. smartAppend supports only '"+n.join("', '")+"'!")}t=s[t];finalHtml="";jQuery.each(l,function(u,v){result=k(v,o);if(i("attributes",o)){jQuery.each(o.attributes,function(x,w){m[x]=f(w,v)})}finalHtml+=g(t,m)+result+h(t)});if(p=="append"){q.append(finalHtml)}else{if(p=="prepend"){q.prepend(finalHtml)}}}e.fn.smartAppend=function(l,m){m=(typeof(m)!=="undefined")?m:{};c(this,l,m,"append");return this};e.fn.smartPrepend=function(l,m){m=(typeof(m)!=="undefined")?m:{};c(this,l,m,"prepend");return this}}(jQuery));