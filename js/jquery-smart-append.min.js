(function(e){function t(e,t){var n="<"+e;if(t==undefined){return n+">"}jQuery.each(t,function(e,t){if(t!=undefined){n+=" "+e+'="'+String(t).replace(/"/g,"&quot;")+'" '}});return n+">"}function n(e){return"</"+e+">"}function r(e,t){if(t[e]!=""&&t[e]!={}&&t[e]!=undefined){return true}return false}function i(e,t){var e=e.replace("node:","");var n=e.split("/");var r;r=t[n[0]];n.splice(0,1);jQuery.each(n,function(e,t){r=r[t]});return r}function s(e,t){var n=e;if(n.indexOf("node:")!==-1){return i(n,t)}return n}function o(e,t){var n;if(!r("value",t)){n=e}else{n=s(t["value"],e)}if(r("wrappedIn",t)){n=a(t["wrappedIn"],n,e)}if(r("before",t)){n=f(t["before"],e)+n}if(r("after",t)){n=n+f(t["after"],e)}return n}function u(e,r){var i;console.log(e);console.log(r);jQuery.each(r["value"],function(e,r){i+=t("td")+o(r["value"],r["params"])+n("td")});return i}function a(e,i,o){if(jQuery.type(e)=="string"){return t(e)+i+n(e)}else{var u={};if(r("attributes",e)){jQuery.each(e["attributes"],function(e,t){u[e]=s(t,o)})}return t(e["tag_name"],u)+i+n(e["tag_name"])}}function f(e,n){if(r("value",e)){return a(e,e["value"],n)}else if(r("attributes",e)){var i={};jQuery.each(e["attributes"],function(e,t){i[e]=s(t,n)});return t(e["tag_name"],i)}else{return e}}function l(e,i,u,a){var f=e;var u=u;var l=f.prop("tagName").toLowerCase();var c={};var h=["ul","ol","dl"];var p={ul:"li",ol:"li",dl:"dt"};if(f.length>1){jQuery.error("smartAppend can't be used on array of elements")}if(jQuery.inArray(l,h)==-1){jQuery.error("Unsupported element. smartAppend supports only '"+h.join("', '")+"'!")}l=p[l];jQuery.each(i,function(e,i){result=o(i,u);if(r("attributes",u)){jQuery.each(u["attributes"],function(e,t){c[e]=s(t,i)})}if(a=="append"){f.append(t(l,c)+result+n(l))}else if(a=="prepend"){f.prepend(t(l,c)+result+n(l))}})}e.fn.smartAppend=function(e,t){t=typeof t!=="undefined"?t:{};l(this,e,t,"append");return this};e.fn.smartPrepend=function(e,t){t=typeof t!=="undefined"?t:{};l(this,e,t,"prepend");return this}})(jQuery)